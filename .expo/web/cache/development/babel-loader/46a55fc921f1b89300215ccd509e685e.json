{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { ThemeProvider, Button, Input, Image, Text } from \"react-native-elements\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport axios from \"axios\";\nimport { api } from \"../../api\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EditPass = function EditPass(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      userName = _useState2[0],\n      setUserName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      regisDate = _useState4[0],\n      setRegisDate = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      getPass = _useState6[0],\n      setGetPass = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      oldPss = _useState8[0],\n      setOldPss = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      newPass = _useState10[0],\n      setNewPass = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      ccPass = _useState12[0],\n      setCcPass = _useState12[1];\n\n  var itemId = route.params.itemId;\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.get(api + \"/user/\" + itemId).then(function (result) {\n              var getData = result.data[0];\n              var all = String(getData.data[0].date_register.split(\"T\", 1));\n              var sall = all.split(\"-\");\n              var y = String(sall[0]);\n              var m = String(sall[1]);\n              var d = String(sall[2]);\n              var date = d + \"/\" + m + \"/\" + y;\n              console.log();\n              setUserName(getData.data[0].user_username);\n              setRegisDate(date);\n              setGetPass(getData.data[0].user_password);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var saveEditPass = function saveEditPass() {\n    return _regeneratorRuntime.async(function saveEditPass$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(getPass != oldPss)) {\n              _context2.next = 4;\n              break;\n            }\n\n            Alert.alert(\"แก้ไขรหัสผ่าน\", \"กรุณากรอกรหัสผ่านเดิมฬห้ถูกต้อง\", [{\n              text: \"OK\"\n            }]);\n            _context2.next = 10;\n            break;\n\n          case 4:\n            if (!(newPass != ccPass)) {\n              _context2.next = 8;\n              break;\n            }\n\n            Alert.alert(\"แก้ไขรหัสผ่าน\", \"กรุณากรอกรหัสผ่านใหม่ให้ตรงกัน\", [{\n              text: \"OK\"\n            }]);\n            _context2.next = 10;\n            break;\n\n          case 8:\n            _context2.next = 10;\n            return _regeneratorRuntime.awrap(axios.put(api + \"/updatepass\", {\n              id: itemId,\n              old_password: oldPss,\n              new_password: newPass\n            }).then(function (response) {\n              return response.data;\n            }).then(function (data) {\n              var changedRow = data.data.changedRows;\n\n              if (changedRow != 0) {\n                Alert.alert(\"แก้ไขรหัสผ่าน\", \"แก้ไขรหัสผ่านสำเร็จ\", [{\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    return navigation.navigate(\"DataPr\");\n                  }\n                }]);\n              }\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsx(ThemeProvider, {\n    theme: theme,\n    children: _jsxs(ScrollView, {\n      style: stylesPr.container,\n      children: [_jsxs(View, {\n        style: stylesPr.boxProfile,\n        children: [_jsx(Image, {\n          source: {\n            uri: \"https://www.ผักสดเชียงใหม่.com/image/logo1.png\"\n          },\n          style: {\n            width: 100,\n            height: 100\n          },\n          containerStyle: {\n            marginLeft: 20\n          }\n        }), _jsxs(View, {\n          style: stylesPr.titleProfile,\n          children: [_jsxs(Text, {\n            style: {\n              fontSize: 20,\n              fontWeight: \"bold\",\n              marginBottom: 5,\n              color: \"#339933\"\n            },\n            children: [\" \", \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\", \" \"]\n          }), _jsxs(Text, {\n            style: {\n              fontSize: 16\n            },\n            children: [\" \", \"usename : \", userName, \" \"]\n          }), _jsxs(Text, {\n            style: {\n              fontSize: 16,\n              marginBottom: 5\n            },\n            children: [\" \", \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01 : \", regisDate, \" \"]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: stylesPr.boxTitle,\n        children: [_jsxs(Text, {\n          style: stylesPr.text,\n          children: [\"  \", _jsx(Icon, {\n            name: \"lock\",\n            size: 23,\n            color: \"#339933\"\n          }), \"   \", \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\\u0E40\\u0E14\\u0E34\\u0E21 :\"]\n        }), _jsx(Input, {\n          secureTextEntry: true,\n          placeholder: \"old password\",\n          inputStyle: {\n            paddingLeft: 10\n          },\n          onChangeText: function onChangeText(input) {\n            return setOldPss(input);\n          }\n        }), _jsxs(Text, {\n          style: stylesPr.text,\n          children: [\"  \", _jsx(Icon, {\n            name: \"unlock\",\n            size: 23,\n            color: \"#339933\"\n          }), \"   \", \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\\u0E43\\u0E2B\\u0E21\\u0E48 :\"]\n        }), _jsx(Input, {\n          secureTextEntry: true,\n          placeholder: \"new password\",\n          inputStyle: {\n            paddingLeft: 10\n          },\n          onChangeText: function onChangeText(input) {\n            return setNewPass(input);\n          }\n        }), _jsxs(Text, {\n          style: stylesPr.text,\n          children: [\"  \", _jsx(Icon, {\n            name: \"unlock\",\n            size: 23,\n            color: \"#339933\"\n          }), \"   \", \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\\u0E43\\u0E2B\\u0E21\\u0E48 :\"]\n        }), _jsx(Input, {\n          secureTextEntry: true,\n          placeholder: \"confirm new password\",\n          inputStyle: {\n            paddingLeft: 10\n          },\n          onChangeText: function onChangeText(input) {\n            return setCcPass(input);\n          }\n        }), _jsx(Button, {\n          icon: _jsx(Icon, {\n            name: \"check\",\n            size: 20,\n            color: \"#fff\"\n          }),\n          containerStyle: {\n            marginTop: 15\n          },\n          title: \"  \\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\",\n          buttonStyle: {\n            backgroundColor: \"#009966\"\n          },\n          onPress: function onPress() {\n            saveEditPass();\n          }\n        }), _jsx(Button, {\n          icon: _jsx(Icon, {\n            name: \"close\",\n            size: 18,\n            color: \"#fff\"\n          }),\n          title: \"  \\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n          containerStyle: {\n            marginTop: 10,\n            marginBottom: 10\n          },\n          buttonStyle: {\n            backgroundColor: \"#CC3333\"\n          },\n          onPress: function onPress() {\n            navigation.navigate(\"DataPr\");\n          }\n        })]\n      }), _jsx(View, {\n        style: {\n          height: 20\n        }\n      })]\n    })\n  });\n};\n\nvar theme = {\n  Button: {\n    raised: true\n  }\n};\nvar stylesPr = StyleSheet.create({\n  container: {\n    flex: 10,\n    padding: 10\n  },\n  boxProfile: {\n    display: \"flex\",\n    padding: 15,\n    backgroundColor: \"#fff\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 5\n  },\n  boxTitle: {\n    display: \"flex\",\n    padding: 15,\n    backgroundColor: \"#fff\"\n  },\n  dataTitle: {\n    paddingLeft: 5,\n    paddingRight: 5,\n    marginTop: 5,\n    paddingTop: 10,\n    display: \"flex\",\n    flexDirection: \"row\",\n    borderBottomColor: \"#1ab16a\",\n    borderBottomWidth: 1\n  },\n  titleProfile: {\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    alignItems: \"center\"\n  },\n  textAreaContainer: {\n    margin: 5,\n    borderRadius: 5,\n    borderColor: \"#919191\",\n    borderWidth: 1,\n    padding: 10\n  },\n  textArea: {\n    minHeight: 70,\n    maxHeight: 70,\n    fontSize: 18,\n    justifyContent: \"flex-start\",\n    textAlignVertical: \"top\"\n  },\n  text: {\n    padding: 5,\n    fontSize: 19\n  }\n});\nexport default EditPass;","map":{"version":3,"sources":["C:/Users/ANUCHA/Desktop/api-cm-vjtb/app-cm-vgtb/vgtb-app/screens/profiles/EditPass.js"],"names":["React","useState","useEffect","ThemeProvider","Button","Input","Image","Text","Icon","axios","api","NavigationContainer","createNativeStackNavigator","EditPass","route","navigation","userName","setUserName","regisDate","setRegisDate","getPass","setGetPass","oldPss","setOldPss","newPass","setNewPass","ccPass","setCcPass","itemId","params","get","then","result","getData","data","all","String","date_register","split","sall","y","m","d","date","console","log","user_username","user_password","saveEditPass","Alert","alert","text","put","id","old_password","new_password","response","changedRow","changedRows","onPress","navigate","catch","error","theme","stylesPr","container","boxProfile","uri","width","height","marginLeft","titleProfile","fontSize","fontWeight","marginBottom","color","boxTitle","paddingLeft","input","marginTop","backgroundColor","raised","StyleSheet","create","flex","padding","display","flexDirection","alignItems","justifyContent","dataTitle","paddingRight","paddingTop","borderBottomColor","borderBottomWidth","marginRight","textAreaContainer","margin","borderRadius","borderColor","borderWidth","textArea","minHeight","maxHeight","textAlignVertical"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  ScrollView,\r\n  TextInput,\r\n  View,\r\n  Alert,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport {\r\n  ThemeProvider,\r\n  Button,\r\n  Input,\r\n  Image,\r\n  Text,\r\n} from \"react-native-elements\";\r\nimport Icon from \"react-native-vector-icons/FontAwesome\";\r\nimport axios from \"axios\";\r\nimport { api } from \"../../api\";\r\n\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\n\r\nconst EditPass = ({ route, navigation }) => {\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [regisDate, setRegisDate] = useState(\"\");\r\n\r\n  const [getPass, setGetPass] = useState(\"\");\r\n  const [oldPss, setOldPss] = useState(\"\");\r\n  const [newPass, setNewPass] = useState(\"\");\r\n  const [ccPass, setCcPass] = useState(\"\");\r\n\r\n  const { itemId } = route.params;\r\n\r\n  useEffect(async () => {\r\n    await axios.get(api + \"/user/\" + itemId).then((result) => {\r\n      const getData = result.data[0];\r\n      const all = String(getData.data[0].date_register.split(\"T\", 1));\r\n      const sall = all.split(\"-\");\r\n      const y = String(sall[0]);\r\n      const m = String(sall[1]);\r\n      const d = String(sall[2]);\r\n      const date = d + \"/\" + m + \"/\" + y;\r\n\r\n      console.log();\r\n      setUserName(getData.data[0].user_username);\r\n      setRegisDate(date);\r\n      setGetPass(getData.data[0].user_password);\r\n    });\r\n  }, []);\r\n  const saveEditPass = async () => {\r\n    if (getPass != oldPss) {\r\n      Alert.alert(\"แก้ไขรหัสผ่าน\", \"กรุณากรอกรหัสผ่านเดิมฬห้ถูกต้อง\", [\r\n        { text: \"OK\" },\r\n      ]);\r\n    } else if (newPass != ccPass) {\r\n      Alert.alert(\"แก้ไขรหัสผ่าน\", \"กรุณากรอกรหัสผ่านใหม่ให้ตรงกัน\", [\r\n        { text: \"OK\" },\r\n      ]);\r\n    } else {\r\n      await axios\r\n        .put(api + \"/updatepass\", {\r\n          id: itemId,\r\n          old_password: oldPss,\r\n          new_password: newPass,\r\n        })\r\n        .then((response) => {\r\n          return response.data;\r\n        })\r\n        .then((data) => {\r\n          const changedRow = data.data.changedRows;\r\n          if (changedRow != 0) {\r\n            Alert.alert(\"แก้ไขรหัสผ่าน\", \"แก้ไขรหัสผ่านสำเร็จ\", [\r\n              { text: \"OK\", onPress: () => navigation.navigate(\"DataPr\") },\r\n            ]);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <ScrollView style={stylesPr.container}>\r\n        <View style={stylesPr.boxProfile}>\r\n          <Image\r\n            source={{ uri: \"https://www.ผักสดเชียงใหม่.com/image/logo1.png\" }}\r\n            style={{ width: 100, height: 100 }}\r\n            containerStyle={{ marginLeft: 20 }}\r\n          />\r\n          <View style={stylesPr.titleProfile}>\r\n            <Text\r\n              style={{\r\n                fontSize: 20,\r\n                fontWeight: \"bold\",\r\n                marginBottom: 5,\r\n                color: \"#339933\",\r\n              }}\r\n            >\r\n              {\" \"}\r\n              แก้ไขรหัสผ่าน{\" \"}\r\n            </Text>\r\n            <Text\r\n              style={{\r\n                fontSize: 16,\r\n              }}\r\n            >\r\n              {\" \"}\r\n              usename : {userName}{\" \"}\r\n            </Text>\r\n            <Text\r\n              style={{\r\n                fontSize: 16,\r\n                marginBottom: 5,\r\n              }}\r\n            >\r\n              {\" \"}\r\n              วันที่สมัครสมาชิก : {regisDate}{\" \"}\r\n            </Text>\r\n          </View>\r\n        </View>\r\n\r\n        <View style={stylesPr.boxTitle}>\r\n          <Text style={stylesPr.text}>\r\n            {\"  \"}\r\n            <Icon name=\"lock\" size={23} color=\"#339933\" />\r\n            {\"   \"}รหัสผ่านเดิม :\r\n          </Text>\r\n          <Input\r\n            secureTextEntry={true}\r\n            placeholder={\"old password\"}\r\n            inputStyle={{ paddingLeft: 10 }}\r\n            onChangeText={(input) => setOldPss(input)}\r\n          />\r\n          <Text style={stylesPr.text}>\r\n            {\"  \"}\r\n            <Icon name=\"unlock\" size={23} color=\"#339933\" />\r\n            {\"   \"}รหัสผ่านใหม่ :\r\n          </Text>\r\n          <Input\r\n            secureTextEntry={true}\r\n            placeholder={\"new password\"}\r\n            inputStyle={{ paddingLeft: 10 }}\r\n            onChangeText={(input) => setNewPass(input)}\r\n          />\r\n          <Text style={stylesPr.text}>\r\n            {\"  \"}\r\n            <Icon name=\"unlock\" size={23} color=\"#339933\" />\r\n            {\"   \"}ยืนยันรหัสผ่านใหม่ :\r\n          </Text>\r\n          <Input\r\n            secureTextEntry={true}\r\n            placeholder={\"confirm new password\"}\r\n            inputStyle={{ paddingLeft: 10 }}\r\n            onChangeText={(input) => setCcPass(input)}\r\n          />\r\n          <Button\r\n            icon={<Icon name=\"check\" size={20} color=\"#fff\" />}\r\n            containerStyle={{ marginTop: 15 }}\r\n            title=\"  บันทึก\"\r\n            buttonStyle={{ backgroundColor: \"#009966\" }}\r\n            onPress={() => {\r\n              saveEditPass();\r\n            }}\r\n          />\r\n          <Button\r\n            icon={<Icon name=\"close\" size={18} color=\"#fff\" />}\r\n            title=\"  ยกเลิก\"\r\n            containerStyle={{ marginTop: 10, marginBottom: 10 }}\r\n            buttonStyle={{ backgroundColor: \"#CC3333\" }}\r\n            onPress={() => {\r\n              navigation.navigate(\"DataPr\");\r\n            }}\r\n          />\r\n        </View>\r\n\r\n        <View style={{ height: 20 }} />\r\n      </ScrollView>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nconst theme = {\r\n  Button: {\r\n    raised: true,\r\n  },\r\n};\r\n\r\nconst stylesPr = StyleSheet.create({\r\n  container: {\r\n    flex: 10,\r\n    padding: 10,\r\n  },\r\n  boxProfile: {\r\n    display: \"flex\",\r\n    padding: 15,\r\n    backgroundColor: \"#fff\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginBottom: 5,\r\n  },\r\n  boxTitle: {\r\n    display: \"flex\",\r\n    padding: 15,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  dataTitle: {\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    marginTop: 5,\r\n    paddingTop: 10,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    borderBottomColor: \"#1ab16a\",\r\n    borderBottomWidth: 1,\r\n  },\r\n  titleProfile: {\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    alignItems: \"center\",\r\n  },\r\n  textAreaContainer: {\r\n    margin: 5,\r\n    borderRadius: 5,\r\n    borderColor: \"#919191\",\r\n    borderWidth: 1,\r\n    padding: 10,\r\n  },\r\n  textArea: {\r\n    minHeight: 70,\r\n    maxHeight: 70,\r\n    fontSize: 18,\r\n    justifyContent: \"flex-start\",\r\n    textAlignVertical: \"top\",\r\n  },\r\n  text: {\r\n    // color: \"#919191\",\r\n    padding: 5,\r\n    fontSize: 19,\r\n  },\r\n});\r\nexport default EditPass;\r\n"]},"metadata":{},"sourceType":"module"}