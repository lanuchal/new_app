{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Button } from \"react-native-elements\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport { api } from \"../api\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar count = 0;\nvar indexX = [];\n\nvar Order = function Order(_ref) {\n  var route = _ref.route;\n  var itemId = route.params.itemId;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filteredDataSource = _useState6[0],\n      setFilteredDataSource = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      datauser = _useState8[0],\n      setDatauser = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      distance = _useState10[0],\n      setDistance = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      price = _useState12[0],\n      setPrice = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      countx = _useState14[0],\n      setCountx = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      derivery_fee = _useState16[0],\n      setDerivery_fee = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      derivery_state = _useState18[0],\n      setDerivery_state = _useState18[1];\n\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            indexX = [];\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(axios.get(api + \"/user/\" + itemId).then(function (result) {\n              setDerivery_fee(result.data[0].data[0].derivery_fee);\n              setDerivery_state(result.data[0].data[0].derivery_state);\n              setDatauser(result.data[0].data[0].user_grade);\n              setDistance(result.data[0].data[0].distance);\n            }).then(function () {}));\n\n          case 3:\n            fetch(api + \"/order/\" + itemId).then(function (response) {\n              return response.json();\n            }).then(function (responseJson) {\n              setFilteredDataSource(responseJson.data);\n            }).then(function () {\n              setIsLoading(false);\n            }).catch(function (error) {\n              console.error(error);\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [route]);\n  var str_derivery_fee = String(derivery_fee);\n  var result = str_derivery_fee.indexOf(derivery_state);\n  var result2 = str_derivery_fee.substring(result);\n  var sub_result2 = str_derivery_fee.indexOf(\",\");\n  var str_2 = result2.substring(0, sub_result2);\n  var sub_str2 = str_2.indexOf(\":\");\n  var str_3 = str_2.substring(sub_str2);\n  var sub_str4 = str_3.indexOf(String(\"\\\"\"));\n  var str_4 = str_3.substring(sub_str4 + 1);\n  var sub_str5 = str_4.indexOf(String(\"\\\"\"));\n  var str_5 = str_4.substring(0, sub_str5);\n  useEffect(function () {\n    count = 0;\n\n    for (var index = 0; index < filteredDataSource.length; index++) {\n      var price_grade = 0;\n\n      if (datauser == \"D\") {\n        price_grade = filteredDataSource[index].price_sell_D;\n      } else if (datauser == \"C\") {\n        price_grade = filteredDataSource[index].price_sell_C;\n      } else if (datauser == \"B\") {\n        price_grade = filteredDataSource[index].price_sell_B;\n      } else if (datauser == \"A\") {\n        price_grade = filteredDataSource[index].price_sell_A;\n      }\n\n      count = count + filteredDataSource[index].pro_req_amount * price_grade;\n    }\n\n    setCountx(count + Number(str_5));\n  }, [filteredDataSource]);\n\n  var oncheng = function oncheng(a, b, c, d) {\n    setTimeout(function () {\n      console.log(a + \"/\" + b + \"/\" + c);\n      console.log(\"c = \" + c.length);\n\n      if (c.length != 0 && Number(c) != 0) {\n        console.log(\"up = \" + Number(c));\n        var price_grade = 0;\n\n        if (datauser == \"D\") {\n          price_grade = filteredDataSource[d].price_sell_D;\n        } else if (datauser == \"C\") {\n          price_grade = filteredDataSource[d].price_sell_C;\n        } else if (datauser == \"B\") {\n          price_grade = filteredDataSource[d].price_sell_B;\n        } else if (datauser == \"A\") {\n          price_grade = filteredDataSource[d].price_sell_A;\n        }\n\n        inAmount(a, b, Number(c), price_grade);\n      }\n    }, 1000);\n  };\n\n  var saveOrder = function saveOrder(id, name) {\n    console.log(id + \"/\" + name);\n    Alert.alert(\"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\", \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19 order \\u0E23\\u0E32\\u0E04\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 \" + name + \" \\u0E1A\\u0E32\\u0E17\", [{\n      text: \"ยกเลิก\",\n      onPress: function onPress() {\n        return console.log(\"Cancel Pressed\");\n      },\n      style: \"cancel\"\n    }, {\n      text: \"ยืนยัน\",\n      onPress: function onPress() {\n        var newFilteredDataSource;\n        return _regeneratorRuntime.async(function onPress$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"submit Pressed\");\n                _context2.next = 3;\n                return _regeneratorRuntime.awrap(axios.put(api + \"/submitorder\", {\n                  bill_id: id\n                }));\n\n              case 3:\n                newFilteredDataSource = filteredDataSource.filter(function (filteredDataSources) {\n                  return filteredDataSources.bill_id !== id;\n                });\n                setFilteredDataSource(newFilteredDataSource);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    }]);\n  };\n\n  var inAmount = function inAmount(id, rid, act, o) {\n    return _regeneratorRuntime.async(function inAmount$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(axios.put(api + \"/inputamountproduct\", {\n              product_id: id,\n              pro_req_id: rid,\n              amount_custom: act,\n              amount_old: act\n            }).then(function (result) {\n              console.log(result.data.result);\n\n              if (result.data.result == \"nok\") {\n                Alert.alert(\"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E21\\u0E35\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1E\\u0E35\\u0E22\\u0E07\\u0E1E\\u0E2D\", \"\\u0E44\\u0E21\\u0E48\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E20\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E15\\u0E32\\u0E21\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E44\\u0E14\\u0E49\", [{\n                  text: \"ยืน\",\n                  onPress: function onPress() {\n                    return console.log(\"Cancel Pressed\");\n                  },\n                  style: \"cancel\"\n                }]);\n              }\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var upAmount = function upAmount(id, rid) {\n    return _regeneratorRuntime.async(function upAmount$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(axios.put(api + \"/upamountproduct\", {\n              product_id: id,\n              pro_req_id: rid\n            }));\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var downAmount = function downAmount(id, rid) {\n    return _regeneratorRuntime.async(function downAmount$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(axios.put(api + \"/downamountproduct\", {\n              product_id: id,\n              pro_req_id: rid\n            }));\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var deleteItem = function deleteItem(Input, amount, proId) {\n    return _regeneratorRuntime.async(function deleteItem$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            console.log(Input + \" = \" + filteredDataSource.length + \" -> length\");\n            Alert.alert(\"\\u0E25\\u0E1A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\", \"ยืนยันที่จะลบรายการสินค้านี้\", [{\n              text: \"ยกเลิก\",\n              onPress: function onPress() {\n                return console.log(\"Cancel Pressed\");\n              },\n              style: \"cancel\"\n            }, {\n              text: \"ยืนยัน\",\n              onPress: function onPress() {\n                var newFilteredDataSource;\n                return _regeneratorRuntime.async(function onPress$(_context7) {\n                  while (1) {\n                    switch (_context7.prev = _context7.next) {\n                      case 0:\n                        _context7.next = 2;\n                        return _regeneratorRuntime.awrap(axios.post(api + \"/deleteoder\", {\n                          id: Input,\n                          amount: Number(amount),\n                          product_id: proId\n                        }).then(function _callee2() {\n                          return _regeneratorRuntime.async(function _callee2$(_context6) {\n                            while (1) {\n                              switch (_context6.prev = _context6.next) {\n                                case 0:\n                                  if (!(filteredDataSource.length == 1)) {\n                                    _context6.next = 3;\n                                    break;\n                                  }\n\n                                  _context6.next = 3;\n                                  return _regeneratorRuntime.awrap(axios.delete(api + \"/deletebill/\" + filteredDataSource[0].bill_id));\n\n                                case 3:\n                                case \"end\":\n                                  return _context6.stop();\n                              }\n                            }\n                          }, null, null, null, Promise);\n                        }));\n\n                      case 2:\n                        newFilteredDataSource = filteredDataSource.filter(function (filteredDataSources) {\n                          return filteredDataSources.pro_req_id !== Input;\n                        });\n                        setFilteredDataSource(newFilteredDataSource);\n\n                      case 4:\n                      case \"end\":\n                        return _context7.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }\n            }]);\n\n          case 2:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function numberWithCommas(x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  var ItemView = function ItemView(_ref2) {\n    var item = _ref2.item,\n        index = _ref2.index;\n\n    var orderItem = function orderItem(price) {\n      return _jsxs(View, {\n        style: styles.boxItems,\n        children: [_jsx(ImageBackground, {\n          source: {\n            uri: \"https://hotel78maldives.com/thecatch/wp-content/uploads/2021/03/NoImageAvailable.png\"\n          },\n          resizeMode: \"cover\",\n          style: {\n            flex: 1,\n            justifyContent: \"center\"\n          },\n          children: _jsx(Image, {\n            source: {\n              uri: \"https://www.\\u0E1C\\u0E31\\u0E01\\u0E2A\\u0E14\\u0E40\\u0E0A\\u0E35\\u0E22\\u0E07\\u0E43\\u0E2B\\u0E21\\u0E48.com/image/product_image/\" + item.product_id + \".jpg\"\n            },\n            style: {\n              width: 100,\n              height: 90\n            }\n          })\n        }), _jsxs(View, {\n          style: {\n            width: \"70%\",\n            justifyContent: \"space-around\",\n            position: \"relative\"\n          },\n          children: [_jsxs(View, {\n            style: {\n              display: \"flex\",\n              flexDirection: \"row\",\n              marginLeft: 10,\n              paddingRight: 5,\n              justifyContent: \"space-between\"\n            },\n            children: [_jsx(Text, {\n              style: {\n                maxWidth: 230,\n                fontSize: 16,\n                fontFamily: \"Kanit_300Light\"\n              },\n              children: item.product_name\n            }), _jsx(Icon, {\n              name: \"trash\",\n              size: 20,\n              color: \"#b83a08\",\n              onPress: function onPress() {\n                deleteItem(item.pro_req_id, filteredDataSource[index].pro_req_amount, item.product_id);\n                console.log(item.product_id);\n              }\n            })]\n          }), _jsxs(Text, {\n            style: {\n              maxWidth: 230,\n              fontSize: 15,\n              marginLeft: 10,\n              marginTop: 10,\n              color: \"#339933\",\n              fontWeight: \"900\",\n              fontFamily: \"Kanit_400Light\"\n            },\n            children: [\"\\u0E23\\u0E32\\u0E04\\u0E32 : \", numberWithCommas(price), \" \\u0E1A\\u0E32\\u0E17\"]\n          }), _jsxs(View, {\n            style: {\n              display: \"flex\",\n              flexDirection: \"row\",\n              marginLeft: 10\n            },\n            children: [_jsxs(Text, {\n              style: {\n                maxWidth: 230,\n                fontSize: 14,\n                color: \"#000000\",\n                fontFamily: \"Kanit_300Light\",\n                marginRight: 15,\n                flexGrow: 1\n              },\n              children: [\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19 ( \", item.unit_name, \" )\"]\n            }), _jsxs(View, {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\"\n              },\n              children: [_jsx(Icon, {\n                name: \"minus-circle\",\n                size: 17,\n                color: \"#308d05\",\n                onPress: function onPress(text) {\n                  if (filteredDataSource[index].pro_req_amount > 0.99) {\n                    upAmount(item.product_id, item.pro_req_id);\n                    setFilteredDataSource(Object.values(_objectSpread(_objectSpread({}, filteredDataSource), {}, _defineProperty({}, index, _objectSpread(_objectSpread({}, filteredDataSource[index]), {}, {\n                      pro_req_amount: parseFloat(filteredDataSource[index].pro_req_amount) - 1\n                    })))));\n                  }\n                }\n              }), _jsx(TextInput, {\n                onChangeText: function onChangeText(text) {\n                  setFilteredDataSource(Object.values(_objectSpread(_objectSpread({}, filteredDataSource), {}, _defineProperty({}, index, _objectSpread(_objectSpread({}, filteredDataSource[index]), {}, {\n                    pro_req_amount: text\n                  })))));\n                  oncheng(item.product_id, item.pro_req_id, text, index);\n                },\n                maxLength: 6,\n                keyboardType: \"number-pad\",\n                value: String(filteredDataSource[index].pro_req_amount),\n                style: {\n                  maxWidth: 60,\n                  fontSize: 15,\n                  color: \"#000000\",\n                  textAlign: \"center\",\n                  fontFamily: \"Kanit_300Light\",\n                  marginLeft: 5,\n                  marginRight: 5\n                }\n              }), _jsx(Icon, {\n                name: \"plus-circle\",\n                size: 17,\n                color: \"#308d05\",\n                onPress: function onPress(text) {\n                  downAmount(item.product_id, item.pro_req_id);\n                  setFilteredDataSource(Object.values(_objectSpread(_objectSpread({}, filteredDataSource), {}, _defineProperty({}, index, _objectSpread(_objectSpread({}, filteredDataSource[index]), {}, {\n                    pro_req_amount: parseFloat(filteredDataSource[index].pro_req_amount) + 1\n                  })))));\n                }\n              })]\n            })]\n          })]\n        })]\n      });\n    };\n\n    if (datauser == \"D\") {\n      return orderItem(item.price_sell_D);\n    } else if (datauser == \"C\") {\n      console.log(\"C\");\n      return orderItem(item.price_sell_C);\n    } else if (datauser == \"B\") {\n      console.log(\"B\");\n      return orderItem(item.price_sell_B);\n    } else if (datauser == \"A\") {\n      console.log(\"A\");\n      return orderItem(item.price_sell_A);\n    }\n  };\n\n  var getItem = function getItem(item) {\n    alert(\"Id : \" + item.id + \" Title : \" + item.title);\n  };\n\n  return _jsxs(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: [_jsxs(View, {\n      style: styles.boxSearch,\n      children: [_jsxs(View, {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\"\n        },\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 14,\n            fontFamily: \"Kanit_300Light\",\n            color: \"#fff\",\n            marginRight: 10\n          },\n          children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\\u0E43\\u0E19\\u0E15\\u0E30\\u0E01\\u0E25\\u0E49\\u0E32\"\n        }), _jsx(Icon, {\n          name: \"shopping-cart\",\n          size: 17,\n          color: \"#fff\",\n          onPress: function onPress() {\n            console.log(item.product_id);\n          }\n        })]\n      }), _jsxs(View, {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\"\n        },\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 20,\n            fontFamily: \"Kanit_300Light\",\n            color: \"#fff\",\n            marginRight: 10\n          },\n          children: filteredDataSource.length\n        }), _jsx(Text, {\n          style: {\n            fontSize: 14,\n            fontFamily: \"Kanit_300Light\",\n            color: \"#fff\"\n          },\n          children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"\n        })]\n      })]\n    }), _jsx(View, {}), _jsxs(View, {\n      style: styles.container,\n      children: [isLoading ? _jsx(View, {\n        style: {\n          flex: 1,\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        children: _jsx(ActivityIndicator, {\n          size: \"large\",\n          color: \"#00ff00\"\n        })\n      }) : _jsx(FlatList, {\n        data: filteredDataSource,\n        horizontal: false,\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        renderItem: ItemView,\n        contentContainerStyle: {\n          padding: 2,\n          paddingBottom: 170,\n          paddingLeft: 10,\n          paddingRight: 10\n        }\n      }), _jsxs(View, {\n        style: styles.tatal,\n        children: [_jsxs(Text, {\n          style: {\n            marginLeft: 5,\n            fontSize: 14,\n            fontFamily: \"Kanit_300Light\",\n            color: \"#000\"\n          },\n          children: [\"\\u0E04\\u0E48\\u0E32\\u0E08\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E07 \", str_5]\n        }), _jsxs(Text, {\n          style: {\n            marginLeft: 5,\n            fontSize: 14,\n            fontFamily: \"Kanit_300Light\",\n            color: \"#000\"\n          },\n          children: [\"\\u0E23\\u0E27\\u0E21 \", numberWithCommas(countx), \" \\u0E1A\\u0E32\\u0E17\"]\n        }), _jsx(Button, {\n          icon: _jsx(Icon, {\n            name: \"check\",\n            size: 15,\n            color: \"#fff\"\n          }),\n          title: \"  \\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\",\n          titleStyle: {\n            fontSize: 14\n          },\n          buttonStyle: {\n            backgroundColor: \"#32661a\",\n            paddingRight: 10\n          },\n          onPress: function onPress() {\n            saveOrder(filteredDataSource[0].bill_id, numberWithCommas(countx));\n          }\n        })]\n      })]\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    minHeight: \"100%\"\n  },\n  boxSearch: {\n    backgroundColor: \"#32661a\",\n    minHeight: 70,\n    maxHeight: 70,\n    display: \"flex\",\n    marginStart: 5,\n    marginEnd: 5,\n    borderBottomEndRadius: 7,\n    borderBottomStartRadius: 7,\n    flexDirection: \"column\",\n    position: \"relative\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 10,\n    marginBottom: 5,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 5,\n      height: 3\n    },\n    shadowOpacity: 0.27,\n    shadowRadius: 4.65,\n    elevation: 6\n  },\n  textInputStyle: {\n    height: 40,\n    borderWidth: 1,\n    paddingLeft: 20,\n    margin: 5,\n    borderColor: \"#009688\",\n    backgroundColor: \"#FFFFFF\"\n  },\n  boxItems: {\n    padding: 5,\n    display: \"flex\",\n    flexDirection: \"row\",\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    marginBottom: 10,\n    minHeight: 100,\n    maxHeight: 100,\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 3\n    },\n    shadowOpacity: 0.27,\n    shadowRadius: 4.65,\n    elevation: 6\n  },\n  tatal: {\n    position: \"absolute\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    height: 60,\n    width: \"98%\",\n    bottom: 78,\n    backgroundColor: \"#d4e7cb\",\n    marginLeft: 5,\n    borderTopLeftRadius: 7,\n    borderTopRightRadius: 7,\n    marginRight: 5,\n    shadowColor: \"#000\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    shadowOffset: {\n      width: 0,\n      height: 3\n    },\n    padding: 5,\n    paddingRight: 10,\n    shadowOpacity: 0.27,\n    shadowRadius: 4.65,\n    elevation: 6\n  }\n});\nexport default Order;","map":{"version":3,"sources":["C:/Users/ANUCHA/Desktop/api-cm-vjtb/app-cm-vgtb/vgtb-app/screens/Order.js"],"names":["React","useState","useEffect","Button","Icon","api","axios","count","indexX","Order","route","itemId","params","search","setSearch","isLoading","setIsLoading","filteredDataSource","setFilteredDataSource","datauser","setDatauser","distance","setDistance","price","setPrice","countx","setCountx","derivery_fee","setDerivery_fee","derivery_state","setDerivery_state","get","then","result","data","user_grade","fetch","response","json","responseJson","catch","error","console","str_derivery_fee","String","indexOf","result2","substring","sub_result2","str_2","sub_str2","str_3","sub_str4","str_4","sub_str5","str_5","index","length","price_grade","price_sell_D","price_sell_C","price_sell_B","price_sell_A","pro_req_amount","Number","oncheng","a","b","c","d","setTimeout","log","inAmount","saveOrder","id","name","Alert","alert","text","onPress","style","put","bill_id","newFilteredDataSource","filter","filteredDataSources","rid","act","o","product_id","pro_req_id","amount_custom","amount_old","upAmount","downAmount","deleteItem","Input","amount","proId","post","delete","numberWithCommas","x","toString","replace","ItemView","item","orderItem","styles","boxItems","uri","flex","justifyContent","width","height","position","display","flexDirection","marginLeft","paddingRight","maxWidth","fontSize","fontFamily","product_name","marginTop","color","fontWeight","marginRight","flexGrow","unit_name","alignItems","Object","values","parseFloat","textAlign","getItem","title","boxSearch","container","padding","paddingBottom","paddingLeft","tatal","backgroundColor","StyleSheet","create","minHeight","maxHeight","marginStart","marginEnd","borderBottomEndRadius","borderBottomStartRadius","marginBottom","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","textInputStyle","borderWidth","margin","borderColor","bottom","borderTopLeftRadius","borderTopRightRadius"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\n// import all the components we are going to use\r\nimport {\r\n  SafeAreaView,\r\n  Text,\r\n  StyleSheet,\r\n  View,\r\n  FlatList,\r\n  TextInput,\r\n  Image,\r\n  Alert,\r\n  ImageBackground,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { Button } from \"react-native-elements\";\r\n\r\nimport Icon from \"react-native-vector-icons/FontAwesome\";\r\nimport { api } from \"../api\";\r\nimport axios from \"axios\";\r\nvar count = 0;\r\nvar indexX = [];\r\nconst Order = ({ route }) => {\r\n  const { itemId } = route.params;\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [filteredDataSource, setFilteredDataSource] = useState([]);\r\n  const [datauser, setDatauser] = useState([]);\r\n  const [distance, setDistance] = useState([]);\r\n  const [price, setPrice] = useState(0);\r\n  const [countx, setCountx] = useState(0);\r\n\r\n  const [derivery_fee, setDerivery_fee] = useState([]);\r\n  const [derivery_state, setDerivery_state] = useState([]);\r\n  useEffect(async () => {\r\n    // setIsLoading(true);\r\n    indexX = [];\r\n    await axios\r\n      .get(api + \"/user/\" + itemId)\r\n      .then((result) => {\r\n        setDerivery_fee(result.data[0].data[0].derivery_fee);\r\n        setDerivery_state(result.data[0].data[0].derivery_state);\r\n        setDatauser(result.data[0].data[0].user_grade);\r\n        setDistance(result.data[0].data[0].distance);\r\n\r\n        // const test = JSON.parse(result.data[0].data[0].derivery_fee);\r\n        // indexX.push(test);\r\n        // console.log(Object.keys(test).length);\r\n      })\r\n      .then(() => {\r\n        // console.log(\"indexX Leght = \" , indexX);\r\n        // console.log(\"derivery_fee Leght = \", Object.keys(derivery_fee).length);\r\n        // const str_derivery_fee = String(derivery_fee);\r\n        // const result = str_derivery_fee.indexOf(\"b\");\r\n        // const result2 = str_derivery_fee.substring(result);\r\n        // const sub_result2 = str_derivery_fee.indexOf(\",\");\r\n        // const str_2 = result2.substring(0, sub_result2);\r\n        // const sub_str2 = str_2.indexOf(\":\");\r\n        // const str_3 = str_2.substring(sub_str2);\r\n        // const sub_str4 = str_3.indexOf(String(`\"`));\r\n        // const str_4 = str_3.substring(sub_str4+1);\r\n        // const sub_str5 = str_4.indexOf(String(`\"`));\r\n        // const str_5 = str_4.substring(0,sub_str5);\r\n        // setPrice(Number(str_5))\r\n        // console.log(String(derivery_fee));\r\n        // console.log(derivery_state + \">\" + str_5);\r\n        // for (let index = 0; index < array.length; index++) {\r\n        //   const element = array[index];\r\n        // }\r\n      });\r\n\r\n    fetch(api + \"/order/\" + itemId)\r\n      .then((response) => response.json())\r\n      .then((responseJson) => {\r\n        setFilteredDataSource(responseJson.data);\r\n      })\r\n      .then(() => {\r\n        setIsLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  }, [route]);\r\n\r\n  // console.log(\"derivery_fee = \", derivery_fee.length);\r\n  // console.log(\"derivery_state = \" ,derivery_state);\r\n  const str_derivery_fee = String(derivery_fee);\r\n  const result = str_derivery_fee.indexOf(derivery_state);\r\n  const result2 = str_derivery_fee.substring(result);\r\n  const sub_result2 = str_derivery_fee.indexOf(\",\");\r\n  const str_2 = result2.substring(0, sub_result2);\r\n  const sub_str2 = str_2.indexOf(\":\");\r\n  const str_3 = str_2.substring(sub_str2);\r\n  const sub_str4 = str_3.indexOf(String(`\"`));\r\n  const str_4 = str_3.substring(sub_str4 + 1);\r\n  const sub_str5 = str_4.indexOf(String(`\"`));\r\n  const str_5 = str_4.substring(0, sub_str5); \r\n  \r\n  useEffect(() => {\r\n    count = 0;\r\n    for (let index = 0; index < filteredDataSource.length; index++) {\r\n      var price_grade = 0;\r\n      if (datauser == \"D\") {\r\n        price_grade = filteredDataSource[index].price_sell_D;\r\n      } else if (datauser == \"C\") {\r\n        price_grade = filteredDataSource[index].price_sell_C;\r\n      } else if (datauser == \"B\") {\r\n        price_grade = filteredDataSource[index].price_sell_B;\r\n      } else if (datauser == \"A\") {\r\n        price_grade = filteredDataSource[index].price_sell_A;\r\n      }\r\n\r\n      count = count + filteredDataSource[index].pro_req_amount * price_grade;\r\n\r\n      // console.log(\"asdas\");\r\n    }\r\n    setCountx(count + Number(str_5));\r\n  }, [filteredDataSource]);\r\n\r\n  const oncheng = (a, b, c, d) => {\r\n    setTimeout(() => {\r\n      console.log(a + \"/\" + b + \"/\" + c);\r\n      console.log(\"c = \" + c.length);\r\n      if (c.length != 0 && Number(c) != 0) {\r\n        console.log(\"up = \" + Number(c));\r\n\r\n        var price_grade = 0;\r\n        if (datauser == \"D\") {\r\n          price_grade = filteredDataSource[d].price_sell_D;\r\n        } else if (datauser == \"C\") {\r\n          price_grade = filteredDataSource[d].price_sell_C;\r\n        } else if (datauser == \"B\") {\r\n          price_grade = filteredDataSource[d].price_sell_B;\r\n        } else if (datauser == \"A\") {\r\n          price_grade = filteredDataSource[d].price_sell_A;\r\n        }\r\n\r\n        inAmount(a, b, Number(c), price_grade);\r\n      }\r\n    }, 1000);\r\n  };\r\n  // console.log(\"countx = \" + countx);\r\n\r\n  const saveOrder = (id, name) => {\r\n    console.log(id + \"/\" + name);\r\n    Alert.alert(`ยืนยัน`, `ยืนยัน order ราคาทั้งหมด ${name} บาท`, [\r\n      {\r\n        text: \"ยกเลิก\",\r\n        onPress: () => console.log(\"Cancel Pressed\"),\r\n        style: \"cancel\",\r\n      },\r\n      {\r\n        text: \"ยืนยัน\",\r\n        onPress: async () => {\r\n          console.log(\"submit Pressed\");\r\n          await axios.put(api + \"/submitorder\", {\r\n            bill_id: id,\r\n          });\r\n\r\n          const newFilteredDataSource = filteredDataSource.filter(\r\n            (filteredDataSources) => {\r\n              return filteredDataSources.bill_id !== id;\r\n            }\r\n          );\r\n          setFilteredDataSource(newFilteredDataSource);\r\n        },\r\n      },\r\n    ]);\r\n  };\r\n  const inAmount = async (id, rid, act, o) => {\r\n    await axios\r\n      .put(api + \"/inputamountproduct\", {\r\n        product_id: id,\r\n        pro_req_id: rid,\r\n        amount_custom: act,\r\n        amount_old: act,\r\n      })\r\n      .then((result) => {\r\n        console.log(result.data.result);\r\n        if (result.data.result == \"nok\") {\r\n          Alert.alert(`สินค้ามีไม่เพียงพอ`, `ไม่สามารภเพิ่มสินค้าตามจำนวนได้`, [\r\n            {\r\n              text: \"ยืน\",\r\n              onPress: () => console.log(\"Cancel Pressed\"),\r\n              style: \"cancel\",\r\n            },\r\n          ]);\r\n        }\r\n      });\r\n  };\r\n  const upAmount = async (id, rid) => {\r\n    await axios.put(api + \"/upamountproduct\", {\r\n      product_id: id,\r\n      pro_req_id: rid,\r\n    });\r\n  };\r\n  const downAmount = async (id, rid) => {\r\n    await axios.put(api + \"/downamountproduct\", {\r\n      product_id: id,\r\n      pro_req_id: rid,\r\n    });\r\n  };\r\n  // console.log(\" out  = \" + filteredDataSource.length + \" -> length\");\r\n\r\n  const deleteItem = async (Input, amount, proId) => {\r\n    console.log(Input + \" = \" + filteredDataSource.length + \" -> length\");\r\n\r\n    Alert.alert(`ลบสินค้า`, \"ยืนยันที่จะลบรายการสินค้านี้\", [\r\n      {\r\n        text: \"ยกเลิก\",\r\n        onPress: () => console.log(\"Cancel Pressed\"),\r\n        style: \"cancel\",\r\n      },\r\n      {\r\n        text: \"ยืนยัน\",\r\n        onPress: async () => {\r\n          await axios\r\n            .post(api + \"/deleteoder\", {\r\n              id: Input,\r\n              amount: Number(amount),\r\n              product_id: proId,\r\n            })\r\n            .then(async () => {\r\n              if (filteredDataSource.length == 1) {\r\n                await axios.delete(\r\n                  api + \"/deletebill/\" + filteredDataSource[0].bill_id\r\n                );\r\n              }\r\n            });\r\n          const newFilteredDataSource = filteredDataSource.filter(\r\n            (filteredDataSources) => {\r\n              return filteredDataSources.pro_req_id !== Input;\r\n            }\r\n          );\r\n          setFilteredDataSource(newFilteredDataSource);\r\n          // console.log(filteredDataSource.length + \" -> length\");\r\n        },\r\n      },\r\n    ]);\r\n  };\r\n  function numberWithCommas(x) {\r\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n\r\n  // const [inputstate, setInputstate] = useState(false);\r\n  // const updateInput = (product_id, pro_req_id, pro_req_amount) => {\r\n  //   console.log(product_id + \"+\" + pro_req_id + \"+\" + pro_req_amount);\r\n  //   if (inputstate) {\r\n  //     inAmount(product_id, pro_req_id, pro_req_amount);\r\n  //     setTimeout(() => {\r\n  //       setInputstate(false);\r\n  //     }, 500);\r\n  //   }\r\n  // };\r\n  const ItemView = ({ item, index }) => {\r\n    const orderItem = (price) => {\r\n      return (\r\n        <View style={styles.boxItems}>\r\n          <ImageBackground\r\n            source={{\r\n              uri: `https://hotel78maldives.com/thecatch/wp-content/uploads/2021/03/NoImageAvailable.png`,\r\n            }}\r\n            resizeMode=\"cover\"\r\n            style={{ flex: 1, justifyContent: \"center\" }}\r\n          >\r\n            <Image\r\n              source={{\r\n                uri: `https://www.ผักสดเชียงใหม่.com/image/product_image/${item.product_id}.jpg`,\r\n              }}\r\n              style={{ width: 100, height: 90 }}\r\n            />\r\n          </ImageBackground>\r\n          <View\r\n            style={{\r\n              width: \"70%\",\r\n              justifyContent: \"space-around\",\r\n              position: \"relative\",\r\n            }}\r\n          >\r\n            <View\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                marginLeft: 10,\r\n                paddingRight: 5,\r\n                justifyContent: \"space-between\",\r\n              }}\r\n            >\r\n              <Text\r\n                style={{\r\n                  maxWidth: 230,\r\n                  fontSize: 16,\r\n                  fontFamily: \"Kanit_300Light\",\r\n                }}\r\n              >\r\n                {item.product_name}\r\n              </Text>\r\n              <Icon\r\n                name=\"trash\"\r\n                size={20}\r\n                color=\"#b83a08\"\r\n                onPress={() => {\r\n                  deleteItem(\r\n                    item.pro_req_id,\r\n                    filteredDataSource[index].pro_req_amount,\r\n                    item.product_id\r\n                  );\r\n                  console.log(item.product_id);\r\n                }}\r\n              />\r\n            </View>\r\n            <Text\r\n              style={{\r\n                maxWidth: 230,\r\n                fontSize: 15,\r\n                marginLeft: 10,\r\n                marginTop: 10,\r\n                // marginBottom: ,\r\n                color: \"#339933\",\r\n                fontWeight: \"900\",\r\n                fontFamily: \"Kanit_400Light\",\r\n              }}\r\n            >\r\n              ราคา : {numberWithCommas(price)} บาท\r\n            </Text>\r\n            <View\r\n              style={{ display: \"flex\", flexDirection: \"row\", marginLeft: 10 }}\r\n            >\r\n              <Text\r\n                style={{\r\n                  maxWidth: 230,\r\n                  fontSize: 14,\r\n                  color: \"#000000\",\r\n                  fontFamily: \"Kanit_300Light\",\r\n                  marginRight: 15,\r\n                  flexGrow: 1,\r\n                }}\r\n              >\r\n                จำนวน ( {item.unit_name} )\r\n              </Text>\r\n              <View\r\n                style={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"row\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <Icon\r\n                  name=\"minus-circle\"\r\n                  size={17}\r\n                  color=\"#308d05\"\r\n                  onPress={(text) => {\r\n                    if (filteredDataSource[index].pro_req_amount > 0.99) {\r\n                      upAmount(item.product_id, item.pro_req_id);\r\n                      setFilteredDataSource(\r\n                        Object.values({\r\n                          ...filteredDataSource,\r\n                          [index]: {\r\n                            ...filteredDataSource[index],\r\n                            pro_req_amount:\r\n                              parseFloat(\r\n                                filteredDataSource[index].pro_req_amount\r\n                              ) - 1,\r\n                          },\r\n                        })\r\n                      );\r\n                    }\r\n                  }}\r\n                />\r\n\r\n                <TextInput\r\n                  onChangeText={(text) => {\r\n                    setFilteredDataSource(\r\n                      Object.values({\r\n                        ...filteredDataSource,\r\n                        [index]: {\r\n                          ...filteredDataSource[index],\r\n                          pro_req_amount: text,\r\n                        },\r\n                      })\r\n                    );\r\n                    oncheng(item.product_id, item.pro_req_id, text, index);\r\n                  }}\r\n                  maxLength={6}\r\n                  keyboardType=\"number-pad\"\r\n                  value={String(filteredDataSource[index].pro_req_amount)}\r\n                  style={{\r\n                    // width: 25,\r\n                    maxWidth: 60,\r\n                    fontSize: 15,\r\n                    color: \"#000000\",\r\n                    textAlign: \"center\",\r\n                    fontFamily: \"Kanit_300Light\",\r\n                    marginLeft: 5,\r\n                    marginRight: 5,\r\n                  }}\r\n                />\r\n                <Icon\r\n                  name=\"plus-circle\"\r\n                  size={17}\r\n                  color=\"#308d05\"\r\n                  onPress={(text) => {\r\n                    downAmount(item.product_id, item.pro_req_id);\r\n                    setFilteredDataSource(\r\n                      Object.values({\r\n                        ...filteredDataSource,\r\n                        [index]: {\r\n                          ...filteredDataSource[index],\r\n                          pro_req_amount:\r\n                            parseFloat(\r\n                              filteredDataSource[index].pro_req_amount\r\n                            ) + 1,\r\n                        },\r\n                      })\r\n                    );\r\n                  }}\r\n                />\r\n              </View>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      );\r\n    };\r\n\r\n    if (datauser == \"D\") {\r\n      return orderItem(item.price_sell_D);\r\n    } else if (datauser == \"C\") {\r\n      console.log(\"C\");\r\n      return orderItem(item.price_sell_C);\r\n    } else if (datauser == \"B\") {\r\n      console.log(\"B\");\r\n      return orderItem(item.price_sell_B);\r\n    } else if (datauser == \"A\") {\r\n      console.log(\"A\");\r\n      return orderItem(item.price_sell_A);\r\n    }\r\n  };\r\n\r\n  const getItem = (item) => {\r\n    // Function for click on an item\r\n    alert(\"Id : \" + item.id + \" Title : \" + item.title);\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView style={{ flex: 1 }}>\r\n      <View style={styles.boxSearch}>\r\n        <View style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n          <Text\r\n            style={{\r\n              fontSize: 14,\r\n              fontFamily: \"Kanit_300Light\",\r\n              color: \"#fff\",\r\n              marginRight: 10,\r\n            }}\r\n          >\r\n            รายการสินค้าทั้งหมดในตะกล้า\r\n          </Text>\r\n          <Icon\r\n            name=\"shopping-cart\"\r\n            size={17}\r\n            color=\"#fff\"\r\n            onPress={() => {\r\n              console.log(item.product_id);\r\n            }}\r\n          />\r\n        </View>\r\n        <View\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Text\r\n            style={{\r\n              fontSize: 20,\r\n              fontFamily: \"Kanit_300Light\",\r\n              color: \"#fff\",\r\n              marginRight: 10,\r\n            }}\r\n          >\r\n            {filteredDataSource.length}\r\n          </Text>\r\n          <Text\r\n            style={{\r\n              fontSize: 14,\r\n              fontFamily: \"Kanit_300Light\",\r\n              color: \"#fff\",\r\n            }}\r\n          >\r\n            รายการ\r\n          </Text>\r\n        </View>\r\n      </View>\r\n      <View></View>\r\n      <View style={styles.container}>\r\n        {isLoading ? (\r\n          <View\r\n            style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\" }}\r\n          >\r\n            <ActivityIndicator size=\"large\" color=\"#00ff00\" />\r\n          </View>\r\n        ) : (\r\n          <FlatList\r\n            data={filteredDataSource}\r\n            horizontal={false}\r\n            keyExtractor={(item, index) => index.toString()}\r\n            renderItem={ItemView}\r\n            contentContainerStyle={{\r\n              padding: 2,\r\n              paddingBottom: 170,\r\n              paddingLeft: 10,\r\n              paddingRight: 10,\r\n            }}\r\n          />\r\n        )}\r\n        <View style={styles.tatal}>\r\n          <Text\r\n            style={{\r\n              marginLeft: 5,\r\n              fontSize: 14,\r\n              fontFamily: \"Kanit_300Light\",\r\n              color: \"#000\",\r\n            }}\r\n          >\r\n            ค่าจัดส่ง {str_5}\r\n          </Text>\r\n          <Text\r\n            style={{\r\n              marginLeft: 5,\r\n              fontSize: 14,\r\n              fontFamily: \"Kanit_300Light\",\r\n              color: \"#000\",\r\n            }}\r\n          >\r\n            รวม {numberWithCommas(countx)} บาท\r\n          </Text>\r\n          <Button\r\n            icon={<Icon name=\"check\" size={15} color=\"#fff\" />}\r\n            title=\"  ยืนยัน\"\r\n            titleStyle={{ fontSize: 14 }}\r\n            buttonStyle={{ backgroundColor: \"#32661a\", paddingRight: 10 }}\r\n            onPress={() => {\r\n              saveOrder(\r\n                filteredDataSource[0].bill_id,\r\n                numberWithCommas(countx)\r\n              );\r\n            }}\r\n          />\r\n        </View>\r\n      </View>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"white\",\r\n    minHeight: \"100%\",\r\n  },\r\n  boxSearch: {\r\n    backgroundColor: \"#32661a\",\r\n    minHeight: 70,\r\n    maxHeight: 70,\r\n    display: \"flex\",\r\n    marginStart: 5,\r\n    marginEnd: 5,\r\n    borderBottomEndRadius: 7,\r\n    borderBottomStartRadius: 7,\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 10,\r\n    marginBottom: 5,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 5,\r\n      height: 3,\r\n    },\r\n    shadowOpacity: 0.27,\r\n    shadowRadius: 4.65,\r\n\r\n    elevation: 6,\r\n  },\r\n\r\n  textInputStyle: {\r\n    height: 40,\r\n    borderWidth: 1,\r\n    paddingLeft: 20,\r\n    margin: 5,\r\n    borderColor: \"#009688\",\r\n    backgroundColor: \"#FFFFFF\",\r\n  },\r\n  boxItems: {\r\n    padding: 5,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    width: \"100%\",\r\n    backgroundColor: \"#fff\",\r\n    marginBottom: 10,\r\n    minHeight: 100,\r\n    maxHeight: 100,\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 3,\r\n    },\r\n    shadowOpacity: 0.27,\r\n    shadowRadius: 4.65,\r\n    elevation: 6,\r\n  },\r\n  tatal: {\r\n    position: \"absolute\",\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    height: 60,\r\n    width: \"98%\",\r\n    bottom: 78,\r\n    backgroundColor: \"#d4e7cb\",\r\n    marginLeft: 5,\r\n    borderTopLeftRadius: 7,\r\n    borderTopRightRadius: 7,\r\n    marginRight: 5,\r\n    shadowColor: \"#000\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 3,\r\n    },\r\n    padding: 5,\r\n    paddingRight: 10,\r\n    shadowOpacity: 0.27,\r\n    shadowRadius: 4.65,\r\n    elevation: 6,\r\n  },\r\n});\r\n\r\nexport default Order;\r\n"]},"metadata":{},"sourceType":"module"}