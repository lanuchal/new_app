{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { ThemeProvider, Button, Input, Image, Text } from \"react-native-elements\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport axios from \"axios\";\nimport { api } from \"../../api\";\nimport GetLocation from \"react-native-get-location\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EditPr = function EditPr(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      distanceUp = _useState2[0],\n      setDistanceUp = _useState2[1];\n\n  var _useState3 = useState(18.803589167415918),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lat = _useState4[0],\n      setLat = _useState4[1];\n\n  var _useState5 = useState(98.998085111886),\n      _useState6 = _slicedToArray(_useState5, 2),\n      long = _useState6[0],\n      setLong = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      storeName = _useState8[0],\n      setStoreName = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      userName = _useState10[0],\n      setUserName = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      address = _useState12[0],\n      setAddress = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      tel = _useState14[0],\n      setTel = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      regisDate = _useState16[0],\n      setRegisDate = _useState16[1];\n\n  var _useState17 = useState(\" \"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      addr_lat = _useState18[0],\n      setAddr_lat = _useState18[1];\n\n  var _useState19 = useState(\" \"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      addr_long = _useState20[0],\n      setAddr_long = _useState20[1];\n\n  var _useState21 = useState(0),\n      _useState22 = _slicedToArray(_useState21, 2),\n      count = _useState22[0],\n      setCount = _useState22[1];\n\n  var itemId = route.params.itemId;\n\n  function randomIntFromInterval(min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  }\n\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.get(api + \"/user/\" + itemId).then(function (result) {\n              var getData = result.data[0];\n              var all = String(getData.data[0].date_register.split(\"T\", 1));\n              var sall = all.split(\"-\");\n              var y = String(sall[0]);\n              var m = String(sall[1]);\n              var d = String(sall[2]);\n              var date = d + \"/\" + m + \"/\" + y;\n              console.log();\n              setStoreName(getData.data[0].name);\n              setUserName(getData.data[0].user_username);\n              setRegisDate(date);\n              setTel(getData.data[0].user_tel == \"-\" ? \"\" : getData.data[0].user_tel);\n              setAddress(getData.data[0].addr);\n              setAddr_lat(getData.data[0].addr_lat);\n              setAddr_long(getData.data[0].addr_long);\n              getmad();\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var saveEdit = function saveEdit() {\n    return _regeneratorRuntime.async(function saveEdit$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"itemId = \" + itemId);\n            console.log(\"storeName = \" + storeName);\n            console.log(\"address = \" + address);\n            console.log(\"tel = \" + tel);\n            console.log(\"addr_lat = \" + addr_lat);\n            console.log(\"addr_long =\" + addr_long);\n\n            if (!(tel.length != 10)) {\n              _context2.next = 10;\n              break;\n            }\n\n            Alert.alert(\"แก้ไขข้อมูลพื้นฐาน\", \"กรุณากรอกเบอร์โทรสัพท์ให้ถูกต้อง\", [{\n              text: \"OK\",\n              onPress: function onPress() {\n                return navigation.navigate(\"EditPr\");\n              }\n            }]);\n            _context2.next = 12;\n            break;\n\n          case 10:\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(axios.put(api + \"/updateuser\", {\n              id: itemId,\n              name: storeName,\n              addr: address,\n              user_tel: tel,\n              addr_lat: addr_lat,\n              addr_long: addr_long\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function distance(lat1, lon1, lat2, lon2, unit) {\n    if (lat1 == lat2 && lon1 == lon2) {\n      return 0;\n    } else {\n      var radlat1 = Math.PI * lat1 / 180;\n      var radlat2 = Math.PI * lat2 / 180;\n      var theta = lon1 - lon2;\n      var radtheta = Math.PI * theta / 180;\n      var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n\n      if (dist > 1) {\n        dist = 1;\n      }\n\n      dist = Math.acos(dist);\n      dist = dist * 180 / Math.PI;\n      dist = dist * 60 * 1.1515;\n\n      if (unit == \"K\") {\n        dist = dist * 1.609344;\n      }\n\n      if (unit == \"N\") {\n        dist = dist * 0.8684;\n      }\n\n      return dist;\n    }\n  }\n\n  var getmad = function getmad() {\n    GetLocation.getCurrentPosition({\n      enableHighAccuracy: true,\n      timeout: 30000\n    }).then(function _callee2(location) {\n      var cal;\n      return _regeneratorRuntime.async(function _callee2$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(location);\n              console.log(location.latitude);\n              console.log(location.longitude);\n              setAddr_lat(location.latitude);\n              setAddr_long(location.longitude);\n              cal = (Math.round(distance(addr_lat, addr_long, lat, long, \"K\") * 100) / 100).toFixed(2);\n              setDistanceUp(cal);\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }).catch(function (error) {\n      var code = error.code,\n          message = error.message;\n      console.warn(code, message);\n    });\n  };\n\n  return _jsx(ThemeProvider, {\n    theme: theme,\n    children: _jsxs(ScrollView, {\n      style: stylesPr.container,\n      children: [_jsxs(View, {\n        style: stylesPr.boxProfile,\n        children: [_jsx(Image, {\n          source: {\n            uri: \"https://www.ผักสดเชียงใหม่.com/image/logo1.png\"\n          },\n          style: {\n            width: 100,\n            height: 100\n          },\n          containerStyle: {\n            marginLeft: 20\n          }\n        }), _jsxs(View, {\n          style: stylesPr.titleProfile,\n          children: [_jsxs(Text, {\n            style: {\n              fontSize: 20,\n              fontWeight: \"bold\",\n              marginBottom: 5,\n              color: \"#339933\"\n            },\n            children: [\" \", \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E1E\\u0E37\\u0E49\\u0E19\\u0E10\\u0E32\\u0E19\", \" \"]\n          }), _jsxs(Text, {\n            style: {\n              fontSize: 16\n            },\n            children: [\" \", \"usename : \", userName, \" \"]\n          }), _jsxs(Text, {\n            style: {\n              fontSize: 16,\n              marginBottom: 5\n            },\n            children: [\" \", \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01 : \", regisDate, \" \"]\n          })]\n        })]\n      }), _jsxs(View, {\n        style: stylesPr.boxTitle,\n        children: [_jsxs(Text, {\n          style: stylesPr.text,\n          children: [\"  \", _jsx(Icon, {\n            name: \"home\",\n            size: 23,\n            color: \"#339933\"\n          }), \"   \", \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E23\\u0E49\\u0E32\\u0E19 :\"]\n        }), _jsx(Input, {\n          placeholder: \"ชื่อร้าน\",\n          value: storeName,\n          inputStyle: {\n            paddingLeft: 10\n          },\n          onChangeText: function onChangeText(input) {\n            return setStoreName(input);\n          }\n        }), _jsxs(Text, {\n          style: stylesPr.text,\n          children: [\"  \", _jsx(Icon, {\n            name: \"phone\",\n            size: 23,\n            color: \"#339933\"\n          }), \"   \", \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E2A\\u0E31\\u0E1E\\u0E17\\u0E4C :\"]\n        }), _jsx(Input, {\n          keyboardType: \"numeric\",\n          placeholder: \"เบอร์โทรสัพท์\",\n          value: tel,\n          inputStyle: {\n            paddingLeft: 10\n          },\n          onChangeText: function onChangeText(input) {\n            return setTel(input);\n          }\n        }), _jsxs(View, {\n          style: {\n            display: \"flex\",\n            flexDirection: \"row\",\n            width: \"100%\",\n            position: \"relative\"\n          },\n          children: [_jsxs(Text, {\n            style: stylesPr.text,\n            children: [\"  \", _jsx(Icon, {\n              name: \"map-marker\",\n              size: 23,\n              color: \"#339933\"\n            }), \"   \", \"latitude/longitude :\"]\n          }), _jsx(Button, {\n            icon: _jsx(Icon, {\n              name: \"question-circle\",\n              size: 18,\n              color: \"#fff\"\n            }),\n            title: \"  \\u0E04\\u0E33\\u0E19\\u0E27\\u0E13\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\",\n            containerStyle: {\n              width: 130,\n              position: \"absolute\",\n              right: 3,\n              borderRadius: 10,\n              padding: 0\n            },\n            buttonStyle: {\n              backgroundColor: \"#01b87b\",\n              padding: 3,\n              alignItems: \"center\"\n            },\n            onPress: function onPress() {\n              getmad();\n            }\n          })]\n        }), _jsx(Input, {\n          style: {\n            fontSize: 15\n          },\n          value: addr_lat + \"/\" + addr_long,\n          disabled: true\n        }), _jsxs(Text, {\n          style: stylesPr.text,\n          children: [\"  \", _jsx(Icon, {\n            name: \"address-card-o\",\n            size: 23,\n            color: \"#339933\"\n          }), \"   \", \"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E23\\u0E49\\u0E32\\u0E19 :\"]\n        }), _jsx(View, {\n          style: stylesPr.textAreaContainer,\n          children: _jsx(TextInput, {\n            leftIcon: _jsx(Icon, {\n              name: \"key\",\n              size: 20,\n              color: \"#339933\"\n            }),\n            style: stylesPr.textArea,\n            value: address,\n            underlineColorAndroid: \"transparent\",\n            placeholder: \"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48 \\u0E2B\\u0E21\\u0E39\\u0E48 \\u0E15\\u0E33\\u0E1A\\u0E25 \\u0E2D\\u0E33\\u0E40\\u0E20\\u0E2D \\u0E08\\u0E31\\u0E07\\u0E2B\\u0E27\\u0E31\\u0E14 \\n\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E44\\u0E1B\\u0E23\\u0E13\\u0E35\\u0E22\\u0E4C\",\n            placeholderTextColor: \"grey\",\n            numberOfLines: 3,\n            multiline: true,\n            onChangeText: function onChangeText(input) {\n              return setAddress(input);\n            }\n          })\n        }), _jsx(Button, {\n          icon: _jsx(Icon, {\n            name: \"check\",\n            size: 20,\n            color: \"#fff\"\n          }),\n          containerStyle: {\n            marginTop: 15\n          },\n          title: \"  \\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\",\n          buttonStyle: {\n            backgroundColor: \"#009966\"\n          },\n          onPress: function onPress() {\n            saveEdit();\n          }\n        }), _jsx(Button, {\n          icon: _jsx(Icon, {\n            name: \"close\",\n            size: 18,\n            color: \"#fff\"\n          }),\n          title: \"  \\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n          containerStyle: {\n            marginTop: 10,\n            marginBottom: 10\n          },\n          buttonStyle: {\n            backgroundColor: \"#CC3333\"\n          },\n          onPress: function onPress() {\n            var rndInt = randomIntFromInterval(1, 100000);\n            navigation.navigate(\"DataPr\", {\n              up: rndInt\n            });\n          }\n        })]\n      }), _jsx(View, {\n        style: {\n          height: 20\n        }\n      })]\n    })\n  });\n};\n\nvar theme = {\n  Button: {\n    raised: true\n  }\n};\nvar stylesPr = StyleSheet.create({\n  container: {\n    flex: 10,\n    padding: 10\n  },\n  boxProfile: {\n    display: \"flex\",\n    padding: 15,\n    backgroundColor: \"#fff\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 5\n  },\n  boxTitle: {\n    display: \"flex\",\n    padding: 15,\n    backgroundColor: \"#fff\"\n  },\n  dataTitle: {\n    paddingLeft: 5,\n    paddingRight: 5,\n    marginTop: 5,\n    paddingTop: 10,\n    display: \"flex\",\n    flexDirection: \"row\",\n    borderBottomColor: \"#1ab16a\",\n    borderBottomWidth: 1\n  },\n  titleProfile: {\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    alignItems: \"center\"\n  },\n  textAreaContainer: {\n    margin: 5,\n    borderRadius: 5,\n    borderColor: \"#919191\",\n    borderWidth: 1,\n    padding: 10\n  },\n  textArea: {\n    minHeight: 70,\n    maxHeight: 70,\n    fontSize: 18,\n    justifyContent: \"flex-start\",\n    textAlignVertical: \"top\"\n  },\n  text: {\n    padding: 5,\n    fontSize: 19\n  }\n});\nexport default EditPr;","map":{"version":3,"sources":["C:/Users/ANUCHA/Desktop/api-cm-vjtb/app-cm-vgtb/vgtb-app/screens/profiles/EditPr.js"],"names":["React","useState","useEffect","ThemeProvider","Button","Input","Image","Text","Icon","axios","api","GetLocation","NavigationContainer","createNativeStackNavigator","EditPr","route","navigation","distanceUp","setDistanceUp","lat","setLat","long","setLong","storeName","setStoreName","userName","setUserName","address","setAddress","tel","setTel","regisDate","setRegisDate","addr_lat","setAddr_lat","addr_long","setAddr_long","count","setCount","itemId","params","randomIntFromInterval","min","max","Math","floor","random","get","then","result","getData","data","all","String","date_register","split","sall","y","m","d","date","console","log","name","user_username","user_tel","addr","getmad","saveEdit","length","Alert","alert","text","onPress","navigate","put","id","catch","error","distance","lat1","lon1","lat2","lon2","unit","radlat1","PI","radlat2","theta","radtheta","dist","sin","cos","acos","getCurrentPosition","enableHighAccuracy","timeout","location","latitude","longitude","cal","round","toFixed","code","message","warn","theme","stylesPr","container","boxProfile","uri","width","height","marginLeft","titleProfile","fontSize","fontWeight","marginBottom","color","boxTitle","paddingLeft","input","display","flexDirection","position","right","borderRadius","padding","backgroundColor","alignItems","textAreaContainer","textArea","marginTop","rndInt","up","raised","StyleSheet","create","flex","justifyContent","dataTitle","paddingRight","paddingTop","borderBottomColor","borderBottomWidth","marginRight","margin","borderColor","borderWidth","minHeight","maxHeight","textAlignVertical"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  ScrollView,\r\n  TextInput,\r\n  View,\r\n  Alert,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport {\r\n  ThemeProvider,\r\n  Button,\r\n  Input,\r\n  Image,\r\n  Text,\r\n} from \"react-native-elements\";\r\nimport Icon from \"react-native-vector-icons/FontAwesome\";\r\nimport axios from \"axios\";\r\nimport { api } from \"../../api\";\r\nimport GetLocation from \"react-native-get-location\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\n\r\nconst EditPr = ({ route, navigation }) => {\r\n  const [distanceUp, setDistanceUp] = useState();\r\n  const [lat, setLat] = useState(18.803589167415918);\r\n  const [long, setLong] = useState(98.998085111886);\r\n\r\n  const [storeName, setStoreName] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [address, setAddress] = useState(\"\");\r\n  const [tel, setTel] = useState(\"\");\r\n  const [regisDate, setRegisDate] = useState(\"\");\r\n  const [addr_lat, setAddr_lat] = useState(\" \");\r\n  const [addr_long, setAddr_long] = useState(\" \");\r\n  const [count, setCount] = useState(0);\r\n  const { itemId } = route.params;\r\n  function randomIntFromInterval(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n  }\r\n\r\n  useEffect(async () => {\r\n    await axios.get(api + \"/user/\" + itemId).then((result) => {\r\n      const getData = result.data[0];\r\n      const all = String(getData.data[0].date_register.split(\"T\", 1));\r\n      const sall = all.split(\"-\");\r\n      const y = String(sall[0]);\r\n      const m = String(sall[1]);\r\n      const d = String(sall[2]);\r\n      const date = d + \"/\" + m + \"/\" + y;\r\n\r\n      console.log();\r\n      setStoreName(getData.data[0].name);\r\n      setUserName(getData.data[0].user_username);\r\n      setRegisDate(date);\r\n      setTel(getData.data[0].user_tel == \"-\" ? \"\" : getData.data[0].user_tel);\r\n      setAddress(getData.data[0].addr);\r\n      setAddr_lat(getData.data[0].addr_lat);\r\n      setAddr_long(getData.data[0].addr_long);\r\n\r\n      getmad();\r\n    });\r\n  }, []);\r\n  const saveEdit = async () => {\r\n    console.log(\"itemId = \" + itemId);\r\n    console.log(\"storeName = \" + storeName);\r\n    console.log(\"address = \" + address);\r\n    console.log(\"tel = \" + tel);\r\n    console.log(\"addr_lat = \" + addr_lat);\r\n    console.log(\"addr_long =\" + addr_long);\r\n    if (tel.length != 10) {\r\n      Alert.alert(\"แก้ไขข้อมูลพื้นฐาน\", \"กรุณากรอกเบอร์โทรสัพท์ให้ถูกต้อง\", [\r\n        { text: \"OK\", onPress: () => navigation.navigate(\"EditPr\") },\r\n      ]);\r\n    }\r\n    //  else if (addr_lat.length < 1 || addr_long.length < 1) {\r\n    //   Alert.alert(\"แก้ไขข้อมูลพื้นฐาน\", \"กรุณากดคำนวณที่อยู่\", [\r\n    //     { text: \"OK\", onPress: () => navigation.navigate(\"EditPr\") },\r\n    //   ]);\r\n    // }\r\n    else {\r\n      await axios\r\n        .put(api + \"/updateuser\", {\r\n          id: itemId,\r\n          name: storeName,\r\n          addr: address,\r\n          user_tel: tel,\r\n          addr_lat: addr_lat,\r\n          addr_long: addr_long,\r\n        })\r\n        // .then((response) => {\r\n        //   uuu(distanceUp);\r\n        //   return response.data;\r\n        // })\r\n        // .then((data) => {\r\n        //   const changedRow = data.data.changedRows;\r\n        //   if (changedRow != 0) {\r\n        //     Alert.alert(\"แก้ไขข้อมูลพื้นฐาน\", \"แก้ไขข้อมูลพื้นฐานสำเร็จ\", [\r\n        //       {\r\n        //         text: \"OK\",\r\n        //         onPress: () => {\r\n        //           const rndInt = randomIntFromInterval(1, 100000);\r\n        //           navigation.navigate(\"DataPr\", { up: rndInt });\r\n        //         },\r\n        //       },\r\n        //     ]);\r\n        //   }\r\n        // })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n  // const uuu = async (distanceUp) => {\r\n  //   await axios.put(api + \"/updateuserdistance\", {\r\n  //     id: itemId,\r\n  //     distance: distanceUp,\r\n  //   });\r\n  // };\r\n\r\n  function distance(lat1, lon1, lat2, lon2, unit) {\r\n    if (lat1 == lat2 && lon1 == lon2) {\r\n      return 0;\r\n    } else {\r\n      var radlat1 = (Math.PI * lat1) / 180;\r\n      var radlat2 = (Math.PI * lat2) / 180;\r\n      var theta = lon1 - lon2;\r\n      var radtheta = (Math.PI * theta) / 180;\r\n      var dist =\r\n        Math.sin(radlat1) * Math.sin(radlat2) +\r\n        Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\r\n      if (dist > 1) {\r\n        dist = 1;\r\n      }\r\n      dist = Math.acos(dist);\r\n      dist = (dist * 180) / Math.PI;\r\n      dist = dist * 60 * 1.1515;\r\n      if (unit == \"K\") {\r\n        dist = dist * 1.609344;\r\n      }\r\n      if (unit == \"N\") {\r\n        dist = dist * 0.8684;\r\n      }\r\n      return dist;\r\n    }\r\n  }\r\n\r\n  const getmad = () => {\r\n    GetLocation.getCurrentPosition({\r\n      enableHighAccuracy: true,\r\n      timeout: 30000,\r\n    })\r\n      .then(async (location) => {\r\n        console.log(location);\r\n\r\n        console.log(location.latitude);\r\n        console.log(location.longitude);\r\n\r\n        setAddr_lat(location.latitude);\r\n        setAddr_long(location.longitude);\r\n        const cal = (\r\n          Math.round(distance(addr_lat, addr_long, lat, long, \"K\") * 100) / 100\r\n        ).toFixed(2);\r\n        setDistanceUp(cal);\r\n      })\r\n      .catch((error) => {\r\n        const { code, message } = error;\r\n        console.warn(code, message);\r\n      });\r\n  };\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <ScrollView style={stylesPr.container}>\r\n        <View style={stylesPr.boxProfile}>\r\n          <Image\r\n            source={{ uri: \"https://www.ผักสดเชียงใหม่.com/image/logo1.png\" }}\r\n            style={{ width: 100, height: 100 }}\r\n            containerStyle={{ marginLeft: 20 }}\r\n          />\r\n          <View style={stylesPr.titleProfile}>\r\n            <Text\r\n              style={{\r\n                fontSize: 20,\r\n                fontWeight: \"bold\",\r\n                marginBottom: 5,\r\n                color: \"#339933\",\r\n              }}\r\n            >\r\n              {\" \"}\r\n              แก้ไขข้อมูลพื้นฐาน{\" \"}\r\n            </Text>\r\n            <Text\r\n              style={{\r\n                fontSize: 16,\r\n              }}\r\n            >\r\n              {\" \"}\r\n              usename : {userName}{\" \"}\r\n            </Text>\r\n            <Text\r\n              style={{\r\n                fontSize: 16,\r\n                marginBottom: 5,\r\n              }}\r\n            >\r\n              {\" \"}\r\n              วันที่สมัครสมาชิก : {regisDate}{\" \"}\r\n            </Text>\r\n          </View>\r\n        </View>\r\n\r\n        <View style={stylesPr.boxTitle}>\r\n          <Text style={stylesPr.text}>\r\n            {\"  \"}\r\n            <Icon name=\"home\" size={23} color=\"#339933\" />\r\n            {\"   \"}ชื่อร้าน :\r\n          </Text>\r\n          <Input\r\n            // leftIcon={<Icon name=\"home\" size={20} color=\"#339933\" />}\r\n            placeholder={\"ชื่อร้าน\"}\r\n            value={storeName}\r\n            inputStyle={{ paddingLeft: 10 }}\r\n            onChangeText={(input) => setStoreName(input)}\r\n          />\r\n          <Text style={stylesPr.text}>\r\n            {\"  \"}\r\n            <Icon name=\"phone\" size={23} color=\"#339933\" />\r\n            {\"   \"}เบอร์โทรสัพท์ :\r\n          </Text>\r\n          <Input\r\n            keyboardType=\"numeric\"\r\n            // leftIcon={<Icon name=\"phone\" size={20} color=\"#339933\" />}\r\n            placeholder={\"เบอร์โทรสัพท์\"}\r\n            value={tel}\r\n            inputStyle={{ paddingLeft: 10 }}\r\n            onChangeText={(input) => setTel(input)}\r\n          />\r\n          <View\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n              width: \"100%\",\r\n              position: \"relative\",\r\n            }}\r\n          >\r\n            <Text style={stylesPr.text}>\r\n              {\"  \"}\r\n              <Icon name=\"map-marker\" size={23} color=\"#339933\" />\r\n              {\"   \"}latitude/longitude :\r\n            </Text>\r\n            <Button\r\n              icon={<Icon name=\"question-circle\" size={18} color=\"#fff\" />}\r\n              title=\"  คำนวณที่อยู่\"\r\n              containerStyle={{\r\n                width: 130,\r\n                position: \"absolute\",\r\n                right: 3,\r\n                borderRadius: 10,\r\n                padding: 0,\r\n              }}\r\n              buttonStyle={{\r\n                backgroundColor: \"#01b87b\",\r\n                padding: 3,\r\n                alignItems: \"center\",\r\n              }}\r\n              onPress={() => {\r\n                getmad();\r\n              }}\r\n            />\r\n          </View>\r\n          <Input\r\n            // leftIcon={<Icon name=\"phone\" size={20} color=\"#339933\" />}\r\n            style={{ fontSize: 15 }}\r\n            value={addr_lat + \"/\" + addr_long}\r\n            disabled\r\n          />\r\n          <Text style={stylesPr.text}>\r\n            {\"  \"}\r\n            <Icon name=\"address-card-o\" size={23} color=\"#339933\" />\r\n            {\"   \"}ที่อยู่ร้าน :\r\n          </Text>\r\n\r\n          <View style={stylesPr.textAreaContainer}>\r\n            <TextInput\r\n              leftIcon={<Icon name=\"key\" size={20} color=\"#339933\" />}\r\n              style={stylesPr.textArea}\r\n              value={address}\r\n              underlineColorAndroid=\"transparent\"\r\n              placeholder=\"เลขที่ หมู่ ตำบล อำเภอ จังหวัด &#10;รหัสไปรณีย์\"\r\n              placeholderTextColor=\"grey\"\r\n              numberOfLines={3}\r\n              multiline={true}\r\n              onChangeText={(input) => setAddress(input)}\r\n            />\r\n          </View>\r\n\r\n          <Button\r\n            icon={<Icon name=\"check\" size={20} color=\"#fff\" />}\r\n            containerStyle={{ marginTop: 15 }}\r\n            title=\"  บันทึก\"\r\n            buttonStyle={{ backgroundColor: \"#009966\" }}\r\n            onPress={() => {\r\n              saveEdit();\r\n            }}\r\n          />\r\n          <Button\r\n            icon={<Icon name=\"close\" size={18} color=\"#fff\" />}\r\n            title=\"  ยกเลิก\"\r\n            containerStyle={{ marginTop: 10, marginBottom: 10 }}\r\n            buttonStyle={{ backgroundColor: \"#CC3333\" }}\r\n            onPress={() => {\r\n              const rndInt = randomIntFromInterval(1, 100000);\r\n              navigation.navigate(\"DataPr\", { up: rndInt });\r\n            }}\r\n          />\r\n        </View>\r\n\r\n        <View style={{ height: 20 }} />\r\n      </ScrollView>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nconst theme = {\r\n  Button: {\r\n    raised: true,\r\n  },\r\n};\r\n\r\nconst stylesPr = StyleSheet.create({\r\n  container: {\r\n    flex: 10,\r\n    padding: 10,\r\n  },\r\n  boxProfile: {\r\n    display: \"flex\",\r\n    padding: 15,\r\n    backgroundColor: \"#fff\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginBottom: 5,\r\n  },\r\n  boxTitle: {\r\n    display: \"flex\",\r\n    padding: 15,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  dataTitle: {\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    marginTop: 5,\r\n    paddingTop: 10,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    borderBottomColor: \"#1ab16a\",\r\n    borderBottomWidth: 1,\r\n  },\r\n  titleProfile: {\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    alignItems: \"center\",\r\n  },\r\n  textAreaContainer: {\r\n    margin: 5,\r\n    borderRadius: 5,\r\n    borderColor: \"#919191\",\r\n    borderWidth: 1,\r\n    padding: 10,\r\n  },\r\n  textArea: {\r\n    minHeight: 70,\r\n    maxHeight: 70,\r\n    fontSize: 18,\r\n    justifyContent: \"flex-start\",\r\n    textAlignVertical: \"top\",\r\n  },\r\n  text: {\r\n    // color: \"#919191\",\r\n    padding: 5,\r\n    fontSize: 19,\r\n  },\r\n});\r\nexport default EditPr;\r\n"]},"metadata":{},"sourceType":"module"}